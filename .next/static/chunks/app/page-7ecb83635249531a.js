(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2605:function(e,t,a){Promise.resolve().then(a.bind(a,1769))},1769:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return n}});var r=a(7437),s=a(2265);function n(){let[e,t]=(0,s.useState)(null),[a,n]=(0,s.useState)({}),[o,c]=(0,s.useState)(!0),i=(0,s.useRef)({}),d=new Date().toISOString().split("T")[0];(0,s.useEffect)(()=>{u()},[]);let u=async()=>{try{let e=await fetch("/api/menu");if(e.ok){let a=await e.json();t(a)}else console.error("Failed to load menu")}catch(e){console.error("Error loading menu:",e)}finally{c(!1)}},m=(0,s.useCallback)(async e=>{try{if((await fetch("/api/menu",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)return!0;return console.error("Failed to save menu"),!1}catch(e){return console.error("Error saving menu:",e),!1}},[]),f=(0,s.useCallback)((a,r,s)=>{if(!e)return;let l={...e,days:e.days.map(e=>e.date===a?{...e,meals:{...e.meals,[r]:s}}:e)};t(l);let o="".concat(a,"-").concat(r);n(e=>({...e,[o]:{status:"saving"}})),i.current[o]&&clearTimeout(i.current[o]),i.current[o]=setTimeout(async()=>{let e=await m(l);n(t=>({...t,[o]:{status:e?"saved":"error",message:e?"Saved âœ“":"Error saving"}})),setTimeout(()=>{n(e=>{let t={...e};return delete t[o],t})},2e3)},1e3)},[e,m]);return o?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"text-gray-600 text-lg",children:"Loading menu..."})}):e?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:e.days.map(e=>(0,r.jsx)(l,{day:e,isToday:e.date===d,onMealChange:f,saveStatuses:a},e.date))}):(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"text-red-600 text-lg",children:"Failed to load menu"})})}function l(e){let{day:t,isToday:a,onMealChange:s,saveStatuses:n}=e,l=e=>n["".concat(t.date,"-").concat(e)];return(0,r.jsxs)("div",{className:"\n      bg-white rounded-lg shadow-md p-4 border-2 transition-all duration-200\n      ".concat(a?"border-blue-400 bg-blue-50 shadow-lg":"border-gray-200 hover:border-gray-300 hover:shadow-lg","\n    "),children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h3",{className:"font-bold text-lg ".concat(a?"text-blue-800":"text-gray-800"),children:t.dayName}),(0,r.jsx)("p",{className:"text-sm ".concat(a?"text-blue-600":"text-gray-600"),children:t.displayDate})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(o,{label:"Lunch",value:t.meals.lunch,onChange:e=>s(t.date,"lunch",e),saveStatus:l("lunch")}),(0,r.jsx)(o,{label:"Dinner",value:t.meals.dinner,onChange:e=>s(t.date,"dinner",e),saveStatus:l("dinner")})]})]})}function o(e){let{label:t,value:a,onChange:s,saveStatus:n}=e;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t}),n&&(0,r.jsx)("span",{className:"text-xs ".concat("saving"===n.status?"text-orange-500":"saved"===n.status?"text-green-500":"error"===n.status?"text-red-500":"text-gray-500"),children:"saving"===n.status?"Saving...":n.message})]}),(0,r.jsx)("textarea",{value:a,onChange:e=>s(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",rows:3,placeholder:"Enter ".concat(t.toLowerCase()," plan...")})]})}},622:function(e,t,a){"use strict";var r=a(2265),s=Symbol.for("react.element"),n=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,a){var r,c={},i=null,d=null;for(r in void 0!==a&&(i=""+a),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(d=t.ref),t)n.call(t,r)&&!o.hasOwnProperty(r)&&(c[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===c[r]&&(c[r]=t[r]);return{$$typeof:s,type:e,key:i,ref:d,props:c,_owner:l.current}}t.jsx=c,t.jsxs=c},7437:function(e,t,a){"use strict";e.exports=a(622)}},function(e){e.O(0,[971,938,744],function(){return e(e.s=2605)}),_N_E=e.O()}]);